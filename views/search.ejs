<html lang="en">
<%- include("./partials/head.ejs") %>

<body>
  <%- include("./partials/nav.ejs") %>

  <div class="tasks content">
    <h2>Tasks</h2>
    
    <div class="search-task content">
      <form action="/tasks/search" method="post">
        <label for="taskTitle">Task title:</label>
          <input type="text" id="taskTitle" name="taskTitle">
        <label for="taskStatus">Task status:</label>
          <select id="taskStatus" name="taskStatus" >
            <option value="">Select</option>
            <option value="pending">Pending</option>
            <option value="active">Active</option>
            <option value="completed">Completed</option>
          </select>
        <label for="taskDate">Task Date:</label>
        <input type="date" id="taskDate" name="taskDate">
        <label for="srch">Search By:</label>
          <select id="srch" name="srch" required>
            <option value=1>title</option>
            <option value=2>status</option>
            <option value=3>date</option>
            <option value=12>title & status</option>
            <option value=13>title & date</option>
            <option value=23>status & date</option>
            <option value=4>all</option>
          </select>
        <button class="update">Search</button>
    
    <% let d; 
    if (tasks.length > 0) { %>
      <% tasks.forEach(task => { 
        d = task.taskDate.toString(); d = d.slice(0,15) %>
        <a class="single" href="/tasks/<%= task._id %>">
          <h3 class="title"><%= task.taskTitle %></h3>
          <p class="details"><%= d %><br><%= task.taskStatus %></p>
        </a>
      <% }) %>
  </div>
  <div class ="empty">
      <% } else { %>
      <a class ="empty" href="/tasks"><p class="empty">No such tasks found. Go back?</p></a>
    <% } %>
  </div>
  

  <%- include("./partials/footer.ejs") %>
</body>
</html>